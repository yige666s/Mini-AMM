# ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ğŸ“ æ•´ä½“æ¶æ„

Mini-AMM é¡¹ç›®é‡‡ç”¨å¤šå±‚æ¶æ„è®¾è®¡ï¼ŒåŒ…å«æ™ºèƒ½åˆçº¦å±‚ã€æ•°æ®ç´¢å¼•å±‚ã€åç«¯æœåŠ¡å±‚å’Œå‰ç«¯å±•ç¤ºå±‚ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å‰ç«¯å±‚ (Frontend)                    â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Swap UI â”‚  â”‚Liquidity â”‚  â”‚Pool Info â”‚  â”‚Bot Info â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚             â”‚              â”‚             â”‚      â”‚
â”‚       â”‚   Next.js + Wagmi + TailwindCSS         â”‚      â”‚
â”‚       â”‚                                          â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                          â”‚
        â”‚ Web3 Calls                  GraphQL      â”‚
        â”‚                                          â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚               æ•°æ®ç´¢å¼•å±‚ (Subgraph)                       â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           The Graph Node                          â”‚  â”‚
â”‚  â”‚  â€¢ ç›‘å¬é“¾ä¸Šäº‹ä»¶                                    â”‚  â”‚
â”‚  â”‚  â€¢ ç´¢å¼•å’Œå­˜å‚¨æ•°æ®                                  â”‚  â”‚
â”‚  â”‚  â€¢ æä¾› GraphQL API                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ Events
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æ™ºèƒ½åˆçº¦å±‚ (Smart Contracts)                 â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              MiniAMM.sol                         â”‚   â”‚
â”‚  â”‚  â€¢ AMM é€»è¾‘ (x*y=k)                              â”‚   â”‚
â”‚  â”‚  â€¢ æµåŠ¨æ€§ç®¡ç†                                     â”‚   â”‚
â”‚  â”‚  â€¢ æ‰‹ç»­è´¹ç´¯ç§¯                                     â”‚   â”‚
â”‚  â”‚  â€¢ LP Token                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚  TokenA      â”‚  â”‚  TokenB      â”‚                    â”‚
â”‚  â”‚  (ERC20)     â”‚  â”‚  (ERC20)     â”‚                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ RPC/WS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åç«¯æœåŠ¡å±‚ (Backend Bot)                     â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Go Keeper Bot                       â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚  â”‚ Compound      â”‚    â”‚ Rebalance    â”‚         â”‚   â”‚
â”‚  â”‚  â”‚ Service       â”‚    â”‚ Service      â”‚         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚   â”‚
â”‚  â”‚  â”‚ Transaction   â”‚    â”‚ RPC          â”‚         â”‚   â”‚
â”‚  â”‚  â”‚ Service       â”‚    â”‚ Client       â”‚         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—ï¸ æ ¸å¿ƒç»„ä»¶

### 1. æ™ºèƒ½åˆçº¦å±‚

#### MiniAMM.sol

æ ¸å¿ƒ AMM åˆçº¦ï¼Œå®ç° Uniswap V2 çš„æ’å®šä¹˜ç§¯åšå¸‚å•†æ¨¡å‹ã€‚

**ä¸»è¦åŠŸèƒ½ï¼š**

- `addLiquidity()` - æ·»åŠ æµåŠ¨æ€§
- `removeLiquidity()` - ç§»é™¤æµåŠ¨æ€§
- `swap()` - ä»£å¸äº¤æ¢
- `compoundFees()` - å¤æŠ•æ‰‹ç»­è´¹ï¼ˆä»… Botï¼‰
- `rebalance()` - å†å¹³è¡¡ï¼ˆä»… Botï¼‰

**çŠ¶æ€å˜é‡ï¼š**

```solidity
uint256 public reserveA;      // Token A å‚¨å¤‡é‡
uint256 public reserveB;      // Token B å‚¨å¤‡é‡
uint256 public feeA;          // ç´¯ç§¯çš„ Token A æ‰‹ç»­è´¹
uint256 public feeB;          // ç´¯ç§¯çš„ Token B æ‰‹ç»­è´¹
address public bot;           // Bot åœ°å€
```

**å®šä»·å…¬å¼ï¼š**

```
x * y = k

amountOut = (reserveOut * amountIn * 997) / (reserveIn * 1000 + amountIn * 997)
```

æ‰‹ç»­è´¹ï¼š0.3% (997/1000)

#### LPToken.sol

æµåŠ¨æ€§æä¾›è€…ä»£å¸ï¼Œç»§æ‰¿è‡ª ERC20 æ ‡å‡†ã€‚

**åŠŸèƒ½ï¼š**

- é“¸é€  LP Tokenï¼ˆæ·»åŠ æµåŠ¨æ€§æ—¶ï¼‰
- é”€æ¯ LP Tokenï¼ˆç§»é™¤æµåŠ¨æ€§æ—¶ï¼‰
- æ ‡å‡† ERC20 åŠŸèƒ½

### 2. æ•°æ®ç´¢å¼•å±‚

#### The Graph Subgraph

å®æ—¶ç´¢å¼•é“¾ä¸Šäº‹ä»¶ï¼Œæä¾› GraphQL æŸ¥è¯¢æ¥å£ã€‚

**ç´¢å¼•çš„äº‹ä»¶ï¼š**

- `Swap` - äº¤æ¢äº‹ä»¶
- `Mint` - æ·»åŠ æµåŠ¨æ€§
- `Burn` - ç§»é™¤æµåŠ¨æ€§
- `FeeCollected` - æ‰‹ç»­è´¹æ”¶é›†
- `Rebalance` - å†å¹³è¡¡

**æ•°æ®å®ä½“ï¼š**

```graphql
type Pool @entity {
  id: ID!
  reserveA: BigInt!
  reserveB: BigInt!
  price: BigDecimal!
  totalLiquidity: BigInt!
  # ...
}

type Swap @entity {
  id: ID!
  user: Bytes!
  amountIn: BigInt!
  amountOut: BigInt!
  # ...
}
```

**æ—¶é—´åºåˆ—æ•°æ®ï¼š**

- `PoolDayData` - æ¯æ—¥ç»Ÿè®¡
- `PoolHourData` - æ¯å°æ—¶ç»Ÿè®¡

### 3. åç«¯æœåŠ¡å±‚

#### Go Keeper Bot

è‡ªåŠ¨åŒ–åç«¯æœåŠ¡ï¼Œæ‰§è¡Œé“¾ä¸‹ä»»åŠ¡ã€‚

**æœåŠ¡æ¨¡å—ï¼š**

##### CompoundServiceï¼ˆå¤æŠ•æœåŠ¡ï¼‰

```go
// å®šæ—¶æ£€æŸ¥æ‰‹ç»­è´¹
// æ¯ 5 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
func (c *CompoundService) executeCompound() error {
    // 1. è·å–ç´¯ç§¯æ‰‹ç»­è´¹
    feeA, feeB := c.contract.GetFees()
    
    // 2. æ£€æŸ¥æ˜¯å¦è¾¾åˆ°æœ€å°é˜ˆå€¼
    if feeA < minAmount || feeB < minAmount {
        return nil
    }
    
    // 3. è®¡ç®—æœ€ä¼˜å¤æŠ•æ•°é‡
    amountA, amountB := c.calculateOptimalAmounts()
    
    // 4. è°ƒç”¨ compoundFees()
    tx := c.contract.CompoundFees()
    
    return nil
}
```

##### RebalanceServiceï¼ˆå†å¹³è¡¡æœåŠ¡ï¼‰

```go
// ç›‘æ§ä»·æ ¼åå·®
// æ¯ 1 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
func (r *RebalanceService) checkAndRebalance() error {
    // 1. è·å–å½“å‰ä»·æ ¼
    currentPrice := reserveB / reserveA
    
    // 2. è®¡ç®—åå·®
    deviation := |currentPrice - initialPrice| / initialPrice
    
    // 3. å¦‚æœè¶…è¿‡é˜ˆå€¼ï¼ˆ5%ï¼‰ï¼Œæ‰§è¡Œå†å¹³è¡¡
    if deviation > threshold {
        r.executeRebalance()
    }
    
    return nil
}
```

##### TransactionServiceï¼ˆäº¤æ˜“æœåŠ¡ï¼‰

```go
// ç®¡ç†äº¤æ˜“ç­¾åå’Œå‘é€
type TransactionService struct {
    privateKey *ecdsa.PrivateKey
    nonce      uint64
    gasPrice   *big.Int
}

// è·å–äº¤æ˜“é…ç½®
func (t *TransactionService) GetTransactOpts() *bind.TransactOpts

// ç­‰å¾…äº¤æ˜“ç¡®è®¤
func (t *TransactionService) WaitForReceipt(txHash) *types.Receipt
```

##### RPCClientï¼ˆRPC å®¢æˆ·ç«¯ï¼‰

```go
// RPC è¿æ¥ç®¡ç†ï¼Œæ”¯æŒæ•…éšœè½¬ç§»
type RPCClient struct {
    client           *ethclient.Client
    fallbackClients  []*ethclient.Client
}

// è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨èŠ‚ç‚¹
func (r *RPCClient) SwitchToFallback() error
```

### 4. å‰ç«¯å±•ç¤ºå±‚

#### Next.js Application

ç°ä»£åŒ–çš„ React åº”ç”¨ï¼Œä½¿ç”¨ App Routerã€‚

**é¡µé¢ç»“æ„ï¼š**

- `/` - é¦–é¡µ
- `/swap` - äº¤æ¢ç•Œé¢
- `/liquidity` - æµåŠ¨æ€§ç®¡ç†
- `/pool` - æ± å­ä¿¡æ¯
- `/bot` - Bot æ“ä½œè®°å½•

**æ ¸å¿ƒåº“ï¼š**

- **Wagmi** - React Hooks for Ethereum
- **Viem** - TypeScript æ¥å£
- **RainbowKit** - é’±åŒ…è¿æ¥
- **TailwindCSS** - æ ·å¼
- **Recharts** - å›¾è¡¨

**æ•°æ®æµï¼š**

```typescript
// 1. è¯»å–åˆçº¦æ•°æ®
const { data: reserves } = useReadContract({
  address: CONTRACTS.miniAMM,
  abi: MINI_AMM_ABI,
  functionName: 'getReserves'
})

// 2. å†™å…¥åˆçº¦
const { writeContract } = useWriteContract()
await writeContract({
  address: CONTRACTS.miniAMM,
  abi: MINI_AMM_ABI,
  functionName: 'swap',
  args: [amountIn, true]
})

// 3. æŸ¥è¯¢ Subgraph
const { data } = useQuery({
  query: gql`
    query {
      swaps(first: 10) {
        id
        amountIn
        amountOut
      }
    }
  `
})
```

## ğŸ”„ æ•°æ®æµ

### Swap æµç¨‹

```
1. ç”¨æˆ·åœ¨å‰ç«¯è¾“å…¥äº¤æ¢æ•°é‡
   â†“
2. å‰ç«¯è°ƒç”¨ getAmountOut() é¢„ä¼°è¾“å‡º
   â†“
3. ç”¨æˆ·æ‰¹å‡†äº¤æ˜“
   â†“
4. å‰ç«¯è°ƒç”¨ swap()
   â†“
5. åˆçº¦æ‰§è¡Œäº¤æ¢é€»è¾‘
   â€¢ æ£€æŸ¥è¾“å…¥
   â€¢ è®¡ç®—è¾“å‡ºï¼ˆå«æ‰‹ç»­è´¹ï¼‰
   â€¢ è½¬ç§»ä»£å¸
   â€¢ æ›´æ–°å‚¨å¤‡é‡
   â€¢ ç´¯ç§¯æ‰‹ç»­è´¹
   â†“
6. è§¦å‘ Swap äº‹ä»¶
   â†“
7. Subgraph ç´¢å¼•äº‹ä»¶
   â†“
8. å‰ç«¯æ›´æ–°æ˜¾ç¤º
```

### è‡ªåŠ¨å¤æŠ•æµç¨‹

```
1. Bot å®šæ—¶å™¨è§¦å‘ï¼ˆæ¯ 5 åˆ†é’Ÿï¼‰
   â†“
2. CompoundService æŸ¥è¯¢ç´¯ç§¯æ‰‹ç»­è´¹
   â†“
3. æ£€æŸ¥æ˜¯å¦è¾¾åˆ°æœ€å°é˜ˆå€¼
   â†“
4. è®¡ç®—æœ€ä¼˜å¤æŠ•æ¯”ä¾‹
   â†“
5. Bot è°ƒç”¨ compoundFees()
   â†“
6. åˆçº¦æ‰§è¡Œå¤æŠ•
   â€¢ æŒ‰æ¯”ä¾‹ä½¿ç”¨ feeA å’Œ feeB
   â€¢ è°ƒç”¨å†…éƒ¨ addLiquidity()
   â€¢ LP Token é“¸é€ ç»™ Bot
   â€¢ æ¸…ç©ºç›¸åº”çš„æ‰‹ç»­è´¹
   â†“
7. è§¦å‘ FeeCollected å’Œ Mint äº‹ä»¶
   â†“
8. Subgraph è®°å½• BotAction
   â†“
9. å‰ç«¯æ˜¾ç¤º Bot æ“ä½œå†å²
```

### å†å¹³è¡¡æµç¨‹

```
1. Bot å®šæ—¶å™¨è§¦å‘ï¼ˆæ¯ 1 åˆ†é’Ÿï¼‰
   â†“
2. RebalanceService æŸ¥è¯¢å½“å‰ä»·æ ¼
   â†“
3. è®¡ç®—ä¸åˆå§‹ä»·æ ¼çš„åå·®
   â†“
4. å¦‚æœåå·® > 5%
   â†“
5. Bot è°ƒç”¨ rebalance()
   â€¢ å°é¢ swap è°ƒæ•´æ¯”ä¾‹
   â€¢ ä¸æ”¶å–æ‰‹ç»­è´¹
   â†“
6. è§¦å‘ Rebalance äº‹ä»¶
   â†“
7. Subgraph è®°å½•
   â†“
8. æ›´æ–°åˆå§‹ä»·æ ¼åŸºå‡†
```

## ğŸ” å®‰å…¨è®¾è®¡

### åˆçº¦å®‰å…¨

1. **é‡å…¥ä¿æŠ¤**
   ```solidity
   modifier noReentrant() {
       require(!locked, "No reentrant");
       locked = true;
       _;
       locked = false;
   }
   ```

2. **æƒé™æ§åˆ¶**
   ```solidity
   modifier onlyBot() {
       require(msg.sender == bot, "Only bot");
       _;
   }
   ```

3. **è¾“å…¥éªŒè¯**
   ```solidity
   require(amountIn > 0, "Invalid amount");
   require(amountOut > 0, "Insufficient output");
   require(amountOut < reserveOut, "Insufficient liquidity");
   ```

### Bot å®‰å…¨

1. **ç§é’¥ç®¡ç†**
   - ç¯å¢ƒå˜é‡å­˜å‚¨
   - ä¸æäº¤åˆ°ä»£ç åº“
   - ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ KMS

2. **Gas æ§åˆ¶**
   - æœ€å¤§ Gas Price é™åˆ¶
   - Gas Limit è®¾ç½®
   - å¤±è´¥é‡è¯•æœºåˆ¶

3. **RPC å¯é æ€§**
   - å¤šèŠ‚ç‚¹å¤‡ä»½
   - è‡ªåŠ¨æ•…éšœè½¬ç§»
   - è¿æ¥å¥åº·æ£€æŸ¥

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### åˆçº¦ä¼˜åŒ–

- ä½¿ç”¨ `immutable` å‡å°‘ gas
- ä¼˜åŒ–å­˜å‚¨å¸ƒå±€
- æ‰¹é‡æ“ä½œå‡å°‘äº¤æ˜“

### Subgraph ä¼˜åŒ–

- åˆç†çš„å®ä½“è®¾è®¡
- ç´¢å¼•å…³é”®å­—æ®µ
- é™åˆ¶å†å²æ•°æ®é‡

### å‰ç«¯ä¼˜åŒ–

- React Query ç¼“å­˜
- æ•°æ®åˆ†é¡µåŠ è½½
- æ‡’åŠ è½½ç»„ä»¶
- ä»£ç åˆ†å‰²

## ğŸ”„ æ‰©å±•æ€§

### æ”¯æŒæ›´å¤šä»£å¸å¯¹

```solidity
// åˆ›å»ºæ–°çš„ MiniAMM å®ä¾‹
MiniAMM tokenCTokenD = new MiniAMM(tokenC, tokenD);
```

### å¤šé“¾éƒ¨ç½²

1. éƒ¨ç½²åˆçº¦åˆ°æ–°é“¾
2. é…ç½® Subgraph
3. Bot æ·»åŠ æ–°é“¾æ”¯æŒ
4. å‰ç«¯æ·»åŠ é“¾åˆ‡æ¢

### é«˜çº§åŠŸèƒ½

- é›†ä¸­æµåŠ¨æ€§ï¼ˆUniswap V3ï¼‰
- é—ªç”µè´·
- é™ä»·å•
- èšåˆè·¯ç”±

---

è¯¥æ¶æ„è®¾è®¡ç¡®ä¿äº†ç³»ç»Ÿçš„**æ¨¡å—åŒ–**ã€**å¯æ‰©å±•æ€§**å’Œ**å¯ç»´æŠ¤æ€§**ï¼Œé€‚åˆä½œä¸ºå­¦ä¹  DeFi åè®®å¼€å‘çš„å‚è€ƒé¡¹ç›®ã€‚
