# Mini-AMM 项目简历描述

## 📋 项目名称：Mini-AMM 去中心化交易所

**项目描述**：一个基于恒定乘积算法（x*y=k）的自动做市商（AMM）去中心化交易平台，实现了完整的 DeFi 交易生态系统。用户可在平台上进行代币兑换、提供流动性赚取手续费，系统配备智能 Keeper Bot 实现自动复投和再平衡功能，并通过 The Graph 提供实时数据索引和历史记录查询。

**技术栈**：Solidity + Hardhat + Next.js + TypeScript + Golang + PostgreSQL + Docker

**核心技术**：Uniswap V2 AMM 算法、ERC-20、The Graph Subgraph、Ethers.js、Wagmi、Gin Framework、GORM

---

## 💼 工作内容

### 1. 智能合约开发（Solidity）

- **基于 Uniswap V2 模型开发 AMM 合约**：实现 x*y=k 恒定乘积做市商算法，支持用户添加/移除流动性、代币交换等核心功能，设计 0.3% 交易手续费机制

- **开发 LPToken 合约**：基于 ERC-20 标准实现流动性凭证代币，实现铸造/销毁功能，为流动性提供者提供资产证明和收益权益

- **实现手续费累积与复投机制**：在合约层设计手续费收集逻辑（feeA/feeB），提供 `compoundFees()` 接口供 Bot 调用，自动计算最优比例将手续费重新注入流动性池

- **设计自动再平衡机制**：实现 `rebalance()` 函数，支持价格偏差检测和自动调整，维护池子价格稳定性

- **完善事件系统与权限控制**：设计 Swap、Mint、Burn、FeeCollected、Rebalance 等事件，实现 Bot 权限管理和重入攻击防护（reentrancy guard）

- **编写完整测试套件**：使用 Hardhat 编写合约单元测试和集成测试，覆盖流动性管理、交换功能、手续费复投、再平衡等核心场景

### 2. 后端服务开发（Golang）

- **使用 Gin 框架开发 RESTful API**：提供池子信息查询、Bot 操作记录、健康检查等接口，支持前端数据展示和监控

- **开发自动复投 Keeper Bot**：实现定时任务（默认 5 分钟），自动检查合约累积手续费，调用 `compoundFees()` 将手续费按最优比例重新注入流动性池，实现复利增长

- **开发自动再平衡服务**：实时监控池子价格偏差，当价格偏离超过阈值（默认 5%）时自动执行小额 swap 操作，维持价格稳定，降低无常损失

- **实现交易管理服务**：封装交易签名、Gas 估算、交易发送、确认等待等功能，支持 EIP-1559 动态 Gas 定价策略

- **开发 RPC 连接管理**：实现主备节点故障转移机制、连接健康检查、自动重连等功能，确保服务稳定性

- **基于 GORM + PostgreSQL 实现数据持久化**：存储 Bot 操作记录（复投、再平衡）、交易哈希、Gas 消耗等信息，支持历史数据查询和分析

- **灵活的配置管理系统**：支持环境变量配置，包括 RPC 节点、合约地址、私钥、时间间隔、阈值等参数，提高系统可维护性

### 3. 数据索引层（The Graph）

- **使用 The Graph 构建 Subgraph**：定义 GraphQL Schema，包含 Pool、Swap、Mint、Burn、BotAction、User 等实体，实现链上数据的结构化存储

- **实现事件监听处理器**：编写 handleSwap、handleMint、handleBurn、handleFeeCollected、handleRebalance 等 mapping 函数，实时索引合约事件

- **设计时间序列数据**：实现 PoolDayData 和 PoolHourData 聚合统计，支持历史数据分析、交易量统计、TVL 变化趋势等

- **提供 GraphQL 查询接口**：为前端提供快速的数据查询服务，支持分页、排序、过滤等功能

### 4. 前端应用开发（Next.js + TypeScript）

- **集成 Wagmi + Ethers.js 实现 Web3 功能**：实现 MetaMask 钱包连接、网络切换、账户状态管理、合约交互等功能

- **开发 Swap 交易界面**：实现代币输入、交换方向切换、实时价格预估、滑点保护、交易确认等功能，提供流畅的交易体验

- **开发流动性管理页面**：支持添加/移除流动性、LP Token 余额展示、收益统计、操作历史记录等功能

- **开发池子信息展示页面**：实时展示 TVL、储备量、价格、手续费累积、交易统计等数据，提供多维度图表分析

- **开发 Bot 监控面板**：展示自动复投和再平衡操作记录、Gas 消耗统计、成功率分析等，提供系统运行透明度

- **使用 TailwindCSS 构建响应式 UI**：实现暗色主题、动画效果、移动端适配等，提升用户体验

- **集成 urql 查询 Subgraph 数据**：实现实时数据更新、历史记录查询、数据可视化等功能

### 5. DevOps 与部署

- **使用 Docker Compose 实现一键部署**：编排 Hardhat 节点、The Graph Node、IPFS、PostgreSQL、后端服务、前端应用等组件

- **实现本地开发环境自动化**：编写部署脚本、数据初始化脚本，简化开发流程

- **测试网部署与验证**：完成 Sepolia 测试网部署，验证合约功能、Bot 运行、Subgraph 索引等

---

## 🎯 项目亮点

1. **完整的 DeFi 技术栈**：覆盖智能合约、后端服务、数据索引、前端应用的全栈 DeFi 开发经验

2. **自动化运营系统**：通过 Keeper Bot 实现手续费自动复投和价格自动再平衡，提升资金利用效率

3. **高性能数据查询**：使用 The Graph 实现链上数据快速索引和查询，支持复杂的历史数据分析

4. **安全性保障**：实现重入攻击防护、权限控制、输入验证等安全机制，通过完整测试套件验证

5. **微服务架构设计**：各组件独立部署、松耦合设计，支持水平扩展和灵活维护

6. **优秀的用户体验**：现代化 UI 设计、实时数据更新、流畅的交互体验

---

## 📊 项目数据

- **智能合约**：3 个核心合约（MiniAMM、LPToken、MockERC20），500+ 行 Solidity 代码
- **后端服务**：8 个核心服务模块，2000+ 行 Go 代码
- **前端应用**：6 个主要页面，50+ 个 React 组件，3000+ 行 TypeScript 代码
- **测试覆盖**：30+ 个测试用例，覆盖核心功能和边界场景
- **部署方式**：支持本地开发、测试网、主网部署
